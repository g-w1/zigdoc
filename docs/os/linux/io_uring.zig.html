<style type="text/css" >
.more-decls {
    padding-left: 50px;
}
.anal-decl {
 background-color: #F7A41D77;
}
code {
 background-color: #F7A41D77;
}
</style><style type="text/css" >
pre > code {
  display: block;
  overflow: auto;
  padding: 0.5em;
  color: black;
}

details {
  margin-bottom: 0.5em;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
}

.tok {
  color: #333;
  font-style: normal;
}

.code {
  font-family: monospace;
  font-size: 0.8em;
}

.tok-kw {
  color: #333;
  font-weight: bold;
}

.tok-str {
  color: #d14;
}

.tok-builtin {
  color: #0086b3;
}

code.zig {
  color: #777;
  font-style: italic;
}

.tok-fn {
  color: #900;
  font-weight: bold;
}

.tok-null {
  color: #008080;
}

.tok-number {
  color: #008080;
}

.tok-type {
  color: #458;
  font-weight: bold;
}
</style><html><a href="null//os/linux/io_uring.zig"><h1>/os/linux/io_uring.zig</h1></a><div class="more-decls"></div><h2 style="color: orange;">types:</h2><div class="more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">IO_Uring</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span> <span class="tok tok-symbol">=</span> <span class="tok tok-symbol">-</span><span class="tok tok-number">1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">sq</span><span class="tok tok-symbol">:</span> <span class="tok">SubmissionQueue</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">cq</span><span class="tok tok-symbol">:</span> <span class="tok">CompletionQueue</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">features</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><b>A friendly way to setup an io_uring, with default io_uring_params.
`entries` must be a power of two between 1 and 4096, although the kernel will make the final
call on how many entries the submission and completion queues will ultimately have,
see https://github.com/torvalds/linux/blob/v5.8/fs/io_uring.c#L8027-L8050.
Matches the interface of io_uring_queue_init() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok">entries</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u13</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">IO_Uring</span></code></pre></div><div class="anal-decl"><b>A powerful way to setup an io_uring, if you want to tweak io_uring_params such as submission
queue thread cpu affinity or thread idle timeout (the kernel and our default is 1 second).
`params` is passed by reference because the kernel needs to modify the parameters.
Matches the interface of io_uring_queue_init_params() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init_params</span><span class="tok tok-symbol">(</span><span class="tok">entries</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u13</span><span class="tok tok-symbol">,</span> <span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_params</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">IO_Uring</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">deinit</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><b>Returns a pointer to a vacant SQE, or an error if the submission queue is full.
We follow the implementation (and atomics) of liburing's `io_uring_get_sqe()` exactly.
However, instead of a null we return an error to force safe handling.
Any situation where the submission queue is full tends more towards a control flow error,
and the null return in liburing is more a C idiom than anything else, for lack of a better
alternative. In Zig, we have first-class error handling... so let's use it.
Matches the implementation of io_uring_get_sqe() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">get_sqe</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Submits the SQEs acquired via get_sqe() to the kernel. You can call this once after you have
called get_sqe() multiple times to setup multiple I/O requests.
Returns the number of SQEs submitted.
Matches the implementation of io_uring_submit() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">submit</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">u32</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">return</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">submit_and_wait</span><span class="tok tok-symbol">(</span><span class="tok tok-number">0</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Like submit(), but allows waiting for events as well.
Returns the number of SQEs submitted.
Matches the implementation of io_uring_submit_and_wait() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">submit_and_wait</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">wait_nr</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><b>Tell the kernel we have submitted SQEs and/or want to wait for CQEs.
Returns the number of SQEs submitted.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">enter</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">to_submit</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">min_complete</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><b>Sync internal state with kernel ring state on the SQ side.
Returns the number of all pending events in the SQ ring, for the shared ring.
This return value includes previously flushed SQEs, as per liburing.
The rationale is to suggest that an io_uring_enter() call is needed rather than not.
Matches the implementation of __io_uring_flush_sq() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">flush_sq</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><b>Returns true if we are not using an SQ thread (thus nobody submits but us),
or if IORING_SQ_NEED_WAKEUP is set and the SQ thread must be explicitly awakened.
For the latter case, we set the SQ thread wakeup flag.
Matches the implementation of sq_ring_needs_enter() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">sq_ring_needs_enter</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><b>Returns the number of flushed and unflushed SQEs pending in the submission queue.
In other words, this is the number of SQEs in the submission queue, i.e. its length.
These are SQEs that the kernel is yet to consume.
Matches the implementation of io_uring_sq_ready in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">sq_ready</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">u32</span> <span class="tok tok-symbol">{</span>
    // Always use the shared ring state (i.e. head and not sqe_head) to avoid going out of sync,
    // see https://github.com/axboe/liburing/issues/92.
    <span class="tok tok-kw">return</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">sq</span><span class="tok tok-symbol">.</span><span class="tok">sqe_tail</span> <span class="tok tok-symbol">-%</span> <span class="tok tok-builtin">@atomicLoad</span><span class="tok tok-symbol">(</span><span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">sq</span><span class="tok tok-symbol">.</span><span class="tok">head</span><span class="tok tok-symbol">,</span> <span class="tok tok-symbol">.</span><span class="tok">Acquire</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Returns the number of CQEs in the completion queue, i.e. its length.
These are CQEs that the application is yet to consume.
Matches the implementation of io_uring_cq_ready in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">cq_ready</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">u32</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">return</span> <span class="tok tok-builtin">@atomicLoad</span><span class="tok tok-symbol">(</span><span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">cq</span><span class="tok tok-symbol">.</span><span class="tok">tail</span><span class="tok tok-symbol">,</span> <span class="tok tok-symbol">.</span><span class="tok">Acquire</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">-%</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">cq</span><span class="tok tok-symbol">.</span><span class="tok">head</span><span class="tok tok-symbol">.*</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Copies as many CQEs as are ready, and that can fit into the destination `cqes` slice.
If none are available, enters into the kernel to wait for at most `wait_nr` CQEs.
Returns the number of CQEs copied, advancing the CQ ring.
Provides all the wait/peek methods found in liburing, but with batching and a single method.
The rationale for copying CQEs rather than copying pointers is that pointers are 8 bytes
whereas CQEs are not much more at only 16 bytes, and this provides a safer faster interface.
Safer, because you no longer need to call cqe_seen(), avoiding idempotency bugs.
Faster, because we can now amortize the atomic store release to `cq.head` across the batch.
See https://github.com/axboe/liburing/issues/103#issuecomment-686665007.
Matches the implementation of io_uring_peek_batch_cqe() in liburing, but supports waiting.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">copy_cqes</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">cqes</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok">io_uring_cqe</span><span class="tok tok-symbol">,</span> <span class="tok">wait_nr</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><b>Returns a copy of an I/O completion, waiting for it if necessary, and advancing the CQ ring.
A convenience method for `copy_cqes()` for when you don't need to batch or peek.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">copy_cqe</span><span class="tok tok-symbol">(</span><span class="tok">ring</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">io_uring_cqe</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">var</span> <span class="tok">cqes</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-number">1</span><span class="tok tok-symbol">]</span><span class="tok">io_uring_cqe</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">undefined</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">const</span> <span class="tok">count</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">try</span> <span class="tok">ring</span><span class="tok tok-symbol">.</span><span class="tok">copy_cqes</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">&amp;</span><span class="tok">cqes</span><span class="tok tok-symbol">,</span> <span class="tok tok-number">1</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">assert</span><span class="tok tok-symbol">(</span><span class="tok">count</span> <span class="tok tok-symbol">==</span> <span class="tok tok-number">1</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok">cqes</span><span class="tok tok-symbol">[</span><span class="tok tok-number">0</span><span class="tok tok-symbol">]</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Matches the implementation of cq_ring_needs_flush() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">cq_ring_needs_flush</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">bool</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">return</span> <span class="tok tok-symbol">(</span><span class="tok tok-builtin">@atomicLoad</span><span class="tok tok-symbol">(</span><span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">sq</span><span class="tok tok-symbol">.</span><span class="tok">flags</span><span class="tok tok-symbol">,</span> <span class="tok tok-symbol">.</span><span class="tok">Unordered</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">&amp;</span> <span class="tok">linux</span><span class="tok tok-symbol">.</span><span class="tok">IORING_SQ_CQ_OVERFLOW</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!=</span> <span class="tok tok-number">0</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>For advanced use cases only that implement custom completion queue methods.
If you use copy_cqes() or copy_cqe() you must not call cqe_seen() or cq_advance().
Must be called exactly once after a zero-copy CQE has been processed by your application.
Not idempotent, calling more than once will result in other CQEs being lost.
Matches the implementation of cqe_seen() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">cqe_seen</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">cqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_cqe</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">cq_advance</span><span class="tok tok-symbol">(</span><span class="tok tok-number">1</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>For advanced use cases only that implement custom completion queue methods.
Matches the implementation of cq_advance() in liburing.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">cq_advance</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">if</span> <span class="tok tok-symbol">(</span><span class="tok">count</span> <span class="tok tok-symbol">&gt;</span> <span class="tok tok-number">0</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">{</span>
        // Ensure the kernel only sees the new head value after the CQEs have been read.
        <span class="tok tok-builtin">@atomicStore</span><span class="tok tok-symbol">(</span><span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">cq</span><span class="tok tok-symbol">.</span><span class="tok">head</span><span class="tok tok-symbol">,</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">cq</span><span class="tok tok-symbol">.</span><span class="tok">head</span><span class="tok tok-symbol">.*</span> <span class="tok tok-symbol">+%</span> <span class="tok">count</span><span class="tok tok-symbol">,</span> <span class="tok tok-symbol">.</span><span class="tok">Release</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-symbol">}</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform an `fsync(2)`.
Returns a pointer to the SQE so that you can further modify the SQE for advanced use cases.
For example, for `fdatasync()` you can set `IORING_FSYNC_DATASYNC` in the SQE's `rw_flags`.
N.B. While SQEs are initiated in the order in which they appear in the submission queue,
operations execute in parallel and completions are unordered. Therefore, an application that
submits a write followed by an fsync in the submission queue cannot expect the fsync to
apply to the write, since the fsync may complete before the write is issued to the disk.
You should preferably use `link_with_next_sqe()` on a write's SQE to link it with an fsync,
or else insert a full write barrier using `drain_previous_sqes()` when queueing an fsync.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">fsync</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">const</span> <span class="tok">sqe</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">try</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">get_sqe</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">io_uring_prep_fsync</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">.</span><span class="tok">user_data</span> <span class="tok tok-symbol">=</span> <span class="tok">user_data</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok">sqe</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a no-op.
Returns a pointer to the SQE so that you can further modify the SQE for advanced use cases.
A no-op is more useful than may appear at first glance.
For example, you could call `drain_previous_sqes()` on the returned SQE, to use the no-op to
know when the ring is idle before acting on a kill signal.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">nop</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">const</span> <span class="tok">sqe</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">try</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">get_sqe</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">io_uring_prep_nop</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">.</span><span class="tok">user_data</span> <span class="tok tok-symbol">=</span> <span class="tok">user_data</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok">sqe</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `read(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">read</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `write(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">write</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `preadv()`.
Returns a pointer to the SQE so that you can further modify the SQE for advanced use cases.
For example, if you want to do a `preadv2()` then set `rw_flags` on the returned SQE.
See https://linux.die.net/man/2/preadv.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">readv</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">iovecs</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">iovec</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `pwritev()`.
Returns a pointer to the SQE so that you can further modify the SQE for advanced use cases.
For example, if you want to do a `pwritev2()` then set `rw_flags` on the returned SQE.
See https://linux.die.net/man/2/pwritev.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">writev</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">iovecs</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">iovec_const</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform an `accept4(2)` on a socket.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">accept</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">addr</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">sockaddr</span><span class="tok tok-symbol">,</span>
    <span class="tok">addrlen</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">socklen_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queue (but does not submit) an SQE to perform a `connect(2)` on a socket.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">connect</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">addr</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">sockaddr</span><span class="tok tok-symbol">,</span>
    <span class="tok">addrlen</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">socklen_t</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `recv(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">recv</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `send(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">send</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform an `openat(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">openat</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">path</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">*</span><span class="tok tok-symbol">:</span><span class="tok tok-number">0</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
    <span class="tok">mode</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">mode_t</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform a `close(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">close</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">const</span> <span class="tok">sqe</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">try</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">get_sqe</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">io_uring_prep_close</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">.</span><span class="tok">user_data</span> <span class="tok tok-symbol">=</span> <span class="tok">user_data</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok">sqe</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to register a timeout operation.
Returns a pointer to the SQE.

The timeout will complete when either the timeout expires, or after the specified number of
events complete (if `count` is greater than `0`).

`flags` may be `0` for a relative timeout, or `IORING_TIMEOUT_ABS` for an absolute timeout.

The completion event result will be `-ETIME` if the timeout completed through expiration,
`0` if the timeout completed after the specified number of events, or `-ECANCELED` if the
timeout was removed before it expired.

io_uring timeouts use the `CLOCK_MONOTONIC` clock source.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">timeout</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">ts</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">__kernel_timespec</span><span class="tok tok-symbol">,</span>
    <span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to remove an existing timeout operation.
Returns a pointer to the SQE.

The timeout is identified by its `user_data`.

The completion event result will be `0` if the timeout was found and cancelled successfully,
`-EBUSY` if the timeout was found but expiration was already in progress, or
`-ENOENT` if the timeout was not found.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">timeout_remove</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">timeout_user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Queues (but does not submit) an SQE to perform an `fallocate(2)`.
Returns a pointer to the SQE.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">fallocate</span><span class="tok tok-symbol">(</span>
    <span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span>
    <span class="tok">user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">mode</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">i32</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">len</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><b>Registers an array of file descriptors.
Every time a file descriptor is put in an SQE and submitted to the kernel, the kernel must
retrieve a reference to the file, and once I/O has completed the file reference must be
dropped. The atomic nature of this file reference can be a slowdown for high IOPS workloads.
This slowdown can be avoided by pre-registering file descriptors.
To refer to a registered file descriptor, IOSQE_FIXED_FILE must be set in the SQE's flags,
and the SQE's fd must be set to the index of the file descriptor in the registered array.
Registering file descriptors will wait for the ring to idle.
Files are automatically unregistered by the kernel when the ring is torn down.
An application need unregister only if it wants to register a new array of file descriptors.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">register_files</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">,</span> <span class="tok">fds</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><b>Unregisters all registered file descriptors previously associated with the ring.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">unregister_files</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">IO_Uring</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div></div></details></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">SubmissionQueue</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">head</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">tail</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">mask</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">dropped</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">array</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">sqes</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok">io_uring_sqe</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">mmap</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">align</span><span class="tok tok-symbol">(</span><span class="tok">mem</span><span class="tok tok-symbol">.</span><span class="tok">page_size</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">u8</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">mmap_sqes</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">align</span><span class="tok tok-symbol">(</span><span class="tok">mem</span><span class="tok tok-symbol">.</span><span class="tok">page_size</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">u8</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">sqe_head</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">0</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">sqe_tail</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">0</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok">io_uring_params</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">SubmissionQueue</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">deinit</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">SubmissionQueue</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">munmap</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">mmap_sqes</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">munmap</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">mmap</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div></div></details></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">CompletionQueue</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">head</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">tail</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">mask</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">overflow</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-type">u32</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">cqes</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok">io_uring_cqe</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok">io_uring_params</span><span class="tok tok-symbol">,</span> <span class="tok">sq</span><span class="tok tok-symbol">:</span> <span class="tok">SubmissionQueue</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">CompletionQueue</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">deinit</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">CompletionQueue</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    // A no-op since we now share the mmap with the submission queue.
    // Here for symmetry with the submission queue, and for any future feature support.
<span class="tok tok-symbol">}</span></code></pre></div></div></details></div></div><h2 style="color: orange;">funcs:</h2><div class="more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_nop</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_fsync</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_rw</span><span class="tok tok-symbol">(</span>
    <span class="tok">op</span><span class="tok tok-symbol">:</span> <span class="tok">linux</span><span class="tok tok-symbol">.</span><span class="tok">IORING_OP</span><span class="tok tok-symbol">,</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">addr</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">,</span>
    <span class="tok">len</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_read</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">io_uring_prep_rw</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">.</span><span class="tok">READ</span><span class="tok tok-symbol">,</span> <span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">ptr</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">len</span><span class="tok tok-symbol">,</span> <span class="tok">offset</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_write</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">io_uring_prep_rw</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">.</span><span class="tok">WRITE</span><span class="tok tok-symbol">,</span> <span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">ptr</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">len</span><span class="tok tok-symbol">,</span> <span class="tok">offset</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_readv</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">iovecs</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">iovec</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_writev</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">iovecs</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">iovec_const</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_accept</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">addr</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">sockaddr</span><span class="tok tok-symbol">,</span>
    <span class="tok">addrlen</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">socklen_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_connect</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">addr</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">sockaddr</span><span class="tok tok-symbol">,</span>
    <span class="tok">addrlen</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">socklen_t</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_recv</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">io_uring_prep_rw</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">.</span><span class="tok">RECV</span><span class="tok tok-symbol">,</span> <span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">ptr</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">len</span><span class="tok tok-symbol">,</span> <span class="tok tok-number">0</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">.</span><span class="tok">rw_flags</span> <span class="tok tok-symbol">=</span> <span class="tok">flags</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_send</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">io_uring_prep_rw</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">.</span><span class="tok">SEND</span><span class="tok tok-symbol">,</span> <span class="tok">sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">ptr</span><span class="tok tok-symbol">,</span> <span class="tok">buffer</span><span class="tok tok-symbol">.</span><span class="tok">len</span><span class="tok tok-symbol">,</span> <span class="tok tok-number">0</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">.</span><span class="tok">rw_flags</span> <span class="tok tok-symbol">=</span> <span class="tok">flags</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_openat</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">path</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">*</span><span class="tok tok-symbol">:</span><span class="tok tok-number">0</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
    <span class="tok">mode</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">mode_t</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_close</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_timeout</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">ts</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-kw">const</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">__kernel_timespec</span><span class="tok tok-symbol">,</span>
    <span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
    <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_timeout_remove</span><span class="tok tok-symbol">(</span><span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span> <span class="tok">timeout_user_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span> <span class="tok">flags</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u32</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">io_uring_prep_fallocate</span><span class="tok tok-symbol">(</span>
    <span class="tok">sqe</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">io_uring_sqe</span><span class="tok tok-symbol">,</span>
    <span class="tok">fd</span><span class="tok tok-symbol">:</span> <span class="tok">os</span><span class="tok tok-symbol">.</span><span class="tok">fd_t</span><span class="tok tok-symbol">,</span>
    <span class="tok">mode</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">i32</span><span class="tok tok-symbol">,</span>
    <span class="tok">offset</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
    <span class="tok">len</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u64</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div></div><div class="more-decls"></div></html>