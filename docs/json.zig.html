<style type="text/css" >
.more-decls {
    padding-left: 50px;
}
.anal-decl {
 background-color: #F7A41D77;
}
code {
 background-color: #F7A41D77;
}
</style><style type="text/css" >
pre > code {
  display: block;
  overflow: auto;
  padding: 0.5em;
  color: black;
}

details {
  margin-bottom: 0.5em;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
}

.tok {
  color: #333;
  font-style: normal;
}

.code {
  font-family: monospace;
  font-size: 0.8em;
}

.tok-kw {
  color: #333;
  font-weight: bold;
}

.tok-str {
  color: #d14;
}

.tok-builtin {
  color: #0086b3;
}

code.zig {
  color: #777;
  font-style: italic;
}

.tok-fn {
  color: #900;
  font-weight: bold;
}

.tok-null {
  color: #008080;
}

.tok-number {
  color: #008080;
}

.tok-type {
  color: #458;
  font-weight: bold;
}
</style><html><a href="null//json.zig"><h1>/json.zig</h1></a><div class="more-decls"></div><h2 style="color: orange;">types:</h2><div class="more-decls"><div class="anal-decl"><b>A single token slice into the parent string.

Use `token.slice()` on the input at the current position to get the current slice.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">Token</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">union</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">enum</span><span class="tok tok-symbol">)</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">ObjectBegin</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ObjectEnd</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ArrayBegin</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ArrayEnd</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">String</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">struct</span> <span class="tok tok-symbol">{</span>
        <span class="tok tok-comment">/// How many bytes the token is.</span>
        <span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span><span class="tok tok-symbol">,</span>

        <span class="tok tok-comment">/// Whether string contains an escape sequence and cannot be zero-copied</span>
        <span class="tok">escapes</span><span class="tok tok-symbol">:</span> <span class="tok">StringEscapes</span><span class="tok tok-symbol">,</span>

        <span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">decodedLength</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-builtin">@This</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">usize</span> <span class="tok tok-symbol">{</span>
            <span class="tok tok-kw">return</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">count</span> <span class="tok tok-symbol">+%</span> <span class="tok tok-kw">switch</span> <span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">escapes</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">{</span>
                <span class="tok tok-symbol">.</span><span class="tok">None</span> <span class="tok tok-symbol">=&gt;</span> <span class="tok tok-number">0</span><span class="tok tok-symbol">,</span>
                <span class="tok tok-symbol">.</span><span class="tok">Some</span> <span class="tok tok-symbol">=&gt;</span> <span class="tok tok-symbol">|</span><span class="tok">s</span><span class="tok tok-symbol">|</span> <span class="tok tok-builtin">@bitCast</span><span class="tok tok-symbol">(</span><span class="tok tok-type">usize</span><span class="tok tok-symbol">,</span> <span class="tok">s</span><span class="tok tok-symbol">.</span><span class="tok">size_diff</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">,</span>
            <span class="tok tok-symbol">}</span><span class="tok tok-symbol">;</span>
        <span class="tok tok-symbol">}</span>

        <span class="tok tok-comment">/// Slice into the underlying input string.</span>
        <span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">slice</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-builtin">@This</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">,</span> <span class="tok">input</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">i</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span> <span class="tok tok-symbol">{</span>
            <span class="tok tok-kw">return</span> <span class="tok">input</span><span class="tok tok-symbol">[</span><span class="tok">i</span> <span class="tok tok-symbol">-</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">count</span> <span class="tok tok-symbol">..</span> <span class="tok">i</span><span class="tok tok-symbol">]</span><span class="tok tok-symbol">;</span>
        <span class="tok tok-symbol">}</span>
    <span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Number</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">struct</span> <span class="tok tok-symbol">{</span>
        <span class="tok tok-comment">/// How many bytes the token is.</span>
        <span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span><span class="tok tok-symbol">,</span>

        <span class="tok tok-comment">/// Whether number is simple and can be represented by an integer (i.e. no `.` or `e`)</span>
        <span class="tok">is_integer</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span><span class="tok tok-symbol">,</span>

        <span class="tok tok-comment">/// Slice into the underlying input string.</span>
        <span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">slice</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-builtin">@This</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">,</span> <span class="tok">input</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">i</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span> <span class="tok tok-symbol">{</span>
            <span class="tok tok-kw">return</span> <span class="tok">input</span><span class="tok tok-symbol">[</span><span class="tok">i</span> <span class="tok tok-symbol">-</span> <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">count</span> <span class="tok tok-symbol">..</span> <span class="tok">i</span><span class="tok tok-symbol">]</span><span class="tok tok-symbol">;</span>
        <span class="tok tok-symbol">}</span>
    <span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">True</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">False</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Null</span></code></pre></div></div></details></div><div class="anal-decl"><b>A small streaming JSON parser. This accepts input one byte at a time and returns tokens as
they are encountered. No copies or allocations are performed during parsing and the entire
parsing state requires ~40-50 bytes of stack space.

Conforms strictly to RFC8259.

For a non-byte based wrapper, consider using TokenStream instead.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">StreamingParser</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">state</span><span class="tok tok-symbol">:</span> <span class="tok">State</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">count</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">after_string_state</span><span class="tok tok-symbol">:</span> <span class="tok">State</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">after_value_state</span><span class="tok tok-symbol">:</span> <span class="tok">State</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">complete</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">string_escapes</span><span class="tok tok-symbol">:</span> <span class="tok">StringEscapes</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">string_last_was_high_surrogate</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">string_unicode_codepoint</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u21</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">sequence_first_byte</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u8</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">undefined</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">number_is_integer</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">stack</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u256</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">stack_used</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u8</span></code></pre></div></div></details><details><summary>types:</summary><div class="md-types more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">State</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">enum</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">ObjectSeparator</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">0</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ValueEnd</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">TopLevelBegin</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">TopLevelEnd</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ValueBegin</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">ValueBeginNoClosing</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">String</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte2Of2</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte2Of3</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte3Of3</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte2Of4</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte3Of4</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringUtf8Byte4Of4</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringEscapeCharacter</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringEscapeHexUnicode4</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringEscapeHexUnicode3</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringEscapeHexUnicode2</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">StringEscapeHexUnicode1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Number</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberMaybeDotOrExponent</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberMaybeDigitOrDotOrExponent</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberFractionalRequired</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberFractional</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberMaybeExponent</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberExponent</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberExponentDigitsRequired</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberExponentDigits</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">TrueLiteral1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">TrueLiteral2</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">TrueLiteral3</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">FalseLiteral1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">FalseLiteral2</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">FalseLiteral3</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">FalseLiteral4</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NullLiteral1</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NullLiteral2</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NullLiteral3</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">fromInt</span><span class="tok tok-symbol">(</span><span class="tok">x</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">)</span> <span class="tok">State</span> <span class="tok tok-symbol">{</span>
    <span class="tok">debug</span><span class="tok tok-symbol">.</span><span class="tok">assert</span><span class="tok tok-symbol">(</span><span class="tok">x</span> <span class="tok tok-symbol">==</span> <span class="tok tok-number">0</span> <span class="tok tok-kw">or</span> <span class="tok">x</span> <span class="tok tok-symbol">==</span> <span class="tok tok-number">1</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">const</span> <span class="tok">T</span> <span class="tok tok-symbol">=</span> <span class="tok">std</span><span class="tok tok-symbol">.</span><span class="tok">meta</span><span class="tok tok-symbol">.</span><span class="tok">Tag</span><span class="tok tok-symbol">(</span><span class="tok">State</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok tok-builtin">@intToEnum</span><span class="tok tok-symbol">(</span><span class="tok">State</span><span class="tok tok-symbol">,</span> <span class="tok tok-builtin">@intCast</span><span class="tok tok-symbol">(</span><span class="tok">T</span><span class="tok tok-symbol">,</span> <span class="tok">x</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div></div></details></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span> <span class="tok">StreamingParser</span> <span class="tok tok-symbol">{</span>
    <span class="tok tok-kw">var</span> <span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok">StreamingParser</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">undefined</span><span class="tok tok-symbol">;</span>
    <span class="tok">p</span><span class="tok tok-symbol">.</span><span class="tok">reset</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
    <span class="tok tok-kw">return</span> <span class="tok">p</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">reset</span><span class="tok tok-symbol">(</span><span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">StreamingParser</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><b>Give another byte to the parser and obtain any new tokens. This may (rarely) return two
tokens. token2 is always null if token1 is null.

There is currently no error recovery on a bad stream.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">feed</span><span class="tok tok-symbol">(</span><span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">StreamingParser</span><span class="tok tok-symbol">,</span> <span class="tok">c</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">token1</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-symbol">?</span><span class="tok">Token</span><span class="tok tok-symbol">,</span> <span class="tok">token2</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok tok-symbol">?</span><span class="tok">Token</span><span class="tok tok-symbol">)</span> <span class="tok">Error</span><span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div></div></details><details><summary>values:</summary><div class="md-vals more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">Error</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">error</span><span class="tok tok-symbol">{</span>
        <span class="tok">InvalidTopLevel</span><span class="tok tok-symbol">,</span>
        <span class="tok">TooManyNestedItems</span><span class="tok tok-symbol">,</span>
        <span class="tok">TooManyClosingItems</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidValueBegin</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidValueEnd</span><span class="tok tok-symbol">,</span>
        <span class="tok">UnbalancedBrackets</span><span class="tok tok-symbol">,</span>
        <span class="tok">UnbalancedBraces</span><span class="tok tok-symbol">,</span>
        <span class="tok">UnexpectedClosingBracket</span><span class="tok tok-symbol">,</span>
        <span class="tok">UnexpectedClosingBrace</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidNumber</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidSeparator</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidLiteral</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidEscapeCharacter</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidUnicodeHexSymbol</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidUtf8Byte</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidTopLevelTrailing</span><span class="tok tok-symbol">,</span>
        <span class="tok">InvalidControlCharacter</span><span class="tok tok-symbol">,</span>
    <span class="tok tok-symbol">}</span></code></pre></div></div></details></div><div class="anal-decl"><b>A small wrapper over a StreamingParser for full slices. Returns a stream of json Tokens.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">TokenStream</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">i</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">slice</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">parser</span><span class="tok tok-symbol">:</span> <span class="tok">StreamingParser</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">token</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">?</span><span class="tok">Token</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok">slice</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">)</span> <span class="tok">TokenStream</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">next</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">TokenStream</span><span class="tok tok-symbol">)</span> <span class="tok">Error</span><span class="tok tok-symbol">!</span><span class="tok tok-symbol">?</span><span class="tok">Token</span></code></pre></div></div></details><details><summary>values:</summary><div class="md-vals more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">Error</span> <span class="tok tok-symbol">=</span> <span class="tok">StreamingParser</span><span class="tok tok-symbol">.</span><span class="tok">Error</span> <span class="tok tok-symbol">||</span> <span class="tok tok-kw">error</span><span class="tok tok-symbol">{</span><span class="tok">UnexpectedEndOfJson</span><span class="tok tok-symbol">}</span></code></pre></div></div></details></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">ValueTree</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">arena</span><span class="tok tok-symbol">:</span> <span class="tok">ArenaAllocator</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">root</span><span class="tok tok-symbol">:</span> <span class="tok">Value</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">deinit</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">ValueTree</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">self</span><span class="tok tok-symbol">.</span><span class="tok">arena</span><span class="tok tok-symbol">.</span><span class="tok">deinit</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div></div></details></div><div class="anal-decl"><b>Represents a JSON value
Currently only supports numbers that fit into i64 or f64.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">Value</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">union</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">enum</span><span class="tok tok-symbol">)</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">Null</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Bool</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Integer</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">i64</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Float</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">f64</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">NumberString</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">String</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Array</span><span class="tok tok-symbol">:</span> <span class="tok">Array</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">Object</span><span class="tok tok-symbol">:</span> <span class="tok">ObjectMap</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">jsonStringify</span><span class="tok tok-symbol">(</span>
    <span class="tok">value</span><span class="tok tok-symbol">:</span> <span class="tok tok-builtin">@This</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">,</span>
    <span class="tok">options</span><span class="tok tok-symbol">:</span> <span class="tok">StringifyOptions</span><span class="tok tok-symbol">,</span>
    <span class="tok">out_stream</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-builtin">@TypeOf</span><span class="tok tok-symbol">(</span><span class="tok">out_stream</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">.</span><span class="tok">Error</span><span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">dump</span><span class="tok tok-symbol">(</span><span class="tok">self</span><span class="tok tok-symbol">:</span> <span class="tok">Value</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div></div></details></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">ParseOptions</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">allocator</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">?</span><span class="tok tok-symbol">*</span><span class="tok">Allocator</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">null</span></code></pre></div><div class="anal-decl"><b>Behaviour when a duplicate field is encountered.
</b><pre><code class="zig"><span class="tok">duplicate_field_behavior</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">enum</span> <span class="tok tok-symbol">{</span>
        <span class="tok">UseFirst</span><span class="tok tok-symbol">,</span>
        <span class="tok">Error</span><span class="tok tok-symbol">,</span>
        <span class="tok">UseLast</span><span class="tok tok-symbol">,</span>
    <span class="tok tok-symbol">}</span> <span class="tok tok-symbol">=</span> <span class="tok tok-symbol">.</span><span class="tok">Error</span></code></pre></div><div class="anal-decl"><b>If false, finding an unknown field returns an error.
</b><pre><code class="zig"><span class="tok">ignore_unknown_fields</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">false</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">allow_trailing_data</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">false</span></code></pre></div></div></details></div><div class="anal-decl"><b>A non-stream JSON parser which constructs a tree of Value's.
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">Parser</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">allocator</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">Allocator</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">state</span><span class="tok tok-symbol">:</span> <span class="tok">State</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">copy_strings</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">stack</span><span class="tok tok-symbol">:</span> <span class="tok">Array</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">init</span><span class="tok tok-symbol">(</span><span class="tok">allocator</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">Allocator</span><span class="tok tok-symbol">,</span> <span class="tok">copy_strings</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span><span class="tok tok-symbol">)</span> <span class="tok">Parser</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">deinit</span><span class="tok tok-symbol">(</span><span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">Parser</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">p</span><span class="tok tok-symbol">.</span><span class="tok">stack</span><span class="tok tok-symbol">.</span><span class="tok">deinit</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">fn</span> <span class="tok tok-fn">reset</span><span class="tok tok-symbol">(</span><span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">Parser</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span> <span class="tok tok-symbol">{</span>
    <span class="tok">p</span><span class="tok tok-symbol">.</span><span class="tok">state</span> <span class="tok tok-symbol">=</span> <span class="tok tok-symbol">.</span><span class="tok">Simple</span><span class="tok tok-symbol">;</span>
    <span class="tok">p</span><span class="tok tok-symbol">.</span><span class="tok">stack</span><span class="tok tok-symbol">.</span><span class="tok">shrinkRetainingCapacity</span><span class="tok tok-symbol">(</span><span class="tok tok-number">0</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">;</span>
<span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">parse</span><span class="tok tok-symbol">(</span><span class="tok">p</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">Parser</span><span class="tok tok-symbol">,</span> <span class="tok">input</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">ValueTree</span></code></pre></div></div></details></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">StringifyOptions</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><b>Controls the whitespace emitted
</b><pre><code class="zig"><span class="tok">whitespace</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">?</span><span class="tok">Whitespace</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">null</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">string</span><span class="tok tok-symbol">:</span> <span class="tok">StringOptions</span> <span class="tok tok-symbol">=</span> <span class="tok">StringOptions</span><span class="tok tok-symbol">{</span> <span class="tok tok-symbol">.</span><span class="tok">String</span> <span class="tok tok-symbol">=</span> <span class="tok tok-symbol">.</span><span class="tok tok-symbol">{</span><span class="tok tok-symbol">}</span> <span class="tok tok-symbol">}</span></code></pre></div></div></details><details><summary>types:</summary><div class="md-types more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">Whitespace</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">struct</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><b>How many indentation levels deep are we?
</b><pre><code class="zig"><span class="tok">indent_level</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">usize</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">0</span></code></pre></div><div class="anal-decl"><b>What character(s) should be used for indentation?
</b><pre><code class="zig"><span class="tok">indent</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">union</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">enum</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">{</span>
            <span class="tok">Space</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span>
            <span class="tok">Tab</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">void</span><span class="tok tok-symbol">,</span>
        <span class="tok tok-symbol">}</span> <span class="tok tok-symbol">=</span> <span class="tok tok-symbol">.</span><span class="tok tok-symbol">{</span> <span class="tok tok-symbol">.</span><span class="tok">Space</span> <span class="tok tok-symbol">=</span> <span class="tok tok-number">4</span> <span class="tok tok-symbol">}</span></code></pre></div><div class="anal-decl"><b>After a colon, should whitespace be inserted?
</b><pre><code class="zig"><span class="tok">separator</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">bool</span> <span class="tok tok-symbol">=</span> <span class="tok tok-null">true</span></code></pre></div></div></details><details><summary>funcs</summary><div class="md-funcs more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">outputIndent</span><span class="tok tok-symbol">(</span>
    <span class="tok">whitespace</span><span class="tok tok-symbol">:</span> <span class="tok tok-builtin">@This</span><span class="tok tok-symbol">(</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">,</span>
    <span class="tok">out_stream</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-builtin">@TypeOf</span><span class="tok tok-symbol">(</span><span class="tok">out_stream</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">.</span><span class="tok">Error</span><span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div></div></details></div><div class="anal-decl"><b>Should []u8 be serialised as a string? or an array?
</b><pre><code class="zig"><span class="tok tok-kw">pub</span> <span class="tok tok-kw">const</span> <span class="tok">StringOptions</span> <span class="tok tok-symbol">=</span> <span class="tok tok-kw">union</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">enum</span><span class="tok tok-symbol">)</span></code></pre><details><summary>fields:</summary><div class="md-fields more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok">Array</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok">String</span><span class="tok tok-symbol">:</span> <span class="tok">StringOutputOptions</span></code></pre></div></div></details></div></div></details></div></div><h2 style="color: orange;">funcs:</h2><div class="more-decls"><div class="anal-decl"><b>Validate a JSON string. This does not limit number precision so a decoder may not necessarily
be able to decode the string even if this returns true.
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">validate</span><span class="tok tok-symbol">(</span><span class="tok">s</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">bool</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">parse</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">comptime</span> <span class="tok">T</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">type</span><span class="tok tok-symbol">,</span> <span class="tok">tokens</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">*</span><span class="tok">TokenStream</span><span class="tok tok-symbol">,</span> <span class="tok">options</span><span class="tok tok-symbol">:</span> <span class="tok">ParseOptions</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok">T</span></code></pre></div><div class="anal-decl"><b>Releases resources created by `parse`.
Should be called with the same type and `ParseOptions` that were passed to `parse`
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">parseFree</span><span class="tok tok-symbol">(</span><span class="tok tok-kw">comptime</span> <span class="tok">T</span><span class="tok tok-symbol">:</span> <span class="tok tok-type">type</span><span class="tok tok-symbol">,</span> <span class="tok">value</span><span class="tok tok-symbol">:</span> <span class="tok">T</span><span class="tok tok-symbol">,</span> <span class="tok">options</span><span class="tok tok-symbol">:</span> <span class="tok">ParseOptions</span><span class="tok tok-symbol">)</span> <span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><b>Unescape a JSON string
Only to be used on strings already validated by the parser
(note the unreachable statements and lack of bounds checking)
</b><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">unescapeValidString</span><span class="tok tok-symbol">(</span><span class="tok">output</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-type">u8</span><span class="tok tok-symbol">,</span> <span class="tok">input</span><span class="tok tok-symbol">:</span> <span class="tok tok-symbol">[</span><span class="tok tok-symbol">]</span><span class="tok tok-kw">const</span> <span class="tok tok-type">u8</span><span class="tok tok-symbol">)</span> <span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">fn</span> <span class="tok tok-fn">stringify</span><span class="tok tok-symbol">(</span>
    <span class="tok">value</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">,</span>
    <span class="tok">options</span><span class="tok tok-symbol">:</span> <span class="tok">StringifyOptions</span><span class="tok tok-symbol">,</span>
    <span class="tok">out_stream</span><span class="tok tok-symbol">:</span> <span class="tok tok-kw">anytype</span><span class="tok tok-symbol">,</span>
<span class="tok tok-symbol">)</span> <span class="tok tok-builtin">@TypeOf</span><span class="tok tok-symbol">(</span><span class="tok">out_stream</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">.</span><span class="tok">Error</span><span class="tok tok-symbol">!</span><span class="tok tok-type">void</span></code></pre></div></div><h2 style="color: orange;">values:</h2><div class="more-decls"><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">WriteStream</span> <span class="tok tok-symbol">=</span> <span class="tok tok-builtin">@import</span><span class="tok tok-symbol">(</span><span class="tok tok-str">&quot;json/write_stream.zig&quot;</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">.</span><span class="tok">WriteStream</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">writeStream</span> <span class="tok tok-symbol">=</span> <span class="tok tok-builtin">@import</span><span class="tok tok-symbol">(</span><span class="tok tok-str">&quot;json/write_stream.zig&quot;</span><span class="tok tok-symbol">)</span><span class="tok tok-symbol">.</span><span class="tok">writeStream</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">ObjectMap</span> <span class="tok tok-symbol">=</span> <span class="tok">StringArrayHashMap</span><span class="tok tok-symbol">(</span><span class="tok">Value</span><span class="tok tok-symbol">)</span></code></pre></div><div class="anal-decl"><pre><code class="zig"><span class="tok tok-kw">const</span> <span class="tok">Array</span> <span class="tok tok-symbol">=</span> <span class="tok">ArrayList</span><span class="tok tok-symbol">(</span><span class="tok">Value</span><span class="tok tok-symbol">)</span></code></pre></div></div></html>